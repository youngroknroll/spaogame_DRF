# Postman ì„¤ì • ê°€ì´ë“œ

## ğŸ“¥ Import ë°©ë²•

### 1. Postman Collection Import
1. Postman ì‹¤í–‰
2. ì¢Œì¸¡ ìƒë‹¨ **"Import"** í´ë¦­
3. ë‹¤ìŒ íŒŒì¼ì„ ë“œë˜ê·¸ ì•¤ ë“œë¡­:
   ```
   SPAOGAME_API_Cache_Tests.postman_collection.json
   ```
4. "Import" ë²„íŠ¼ í´ë¦­

### 2. Environment Import
1. Postman ì¢Œì¸¡ ìƒë‹¨ **"Environments"** íƒ­ í´ë¦­
2. **"Import"** í´ë¦­
3. ë‹¤ìŒ íŒŒì¼ì„ ë“œë˜ê·¸ ì•¤ ë“œë¡­:
   ```
   SPAOGAME_Development.postman_environment.json
   ```
4. "Import" ë²„íŠ¼ í´ë¦­
5. ìš°ì¸¡ ìƒë‹¨ì—ì„œ **"SPAOGAME Development"** í™˜ê²½ ì„ íƒ

---

## ğŸš€ ì„œë²„ ì‹¤í–‰

í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ ì‹¤í–‰:

```bash
uv run python manage.py runserver
```

ì„œë²„ê°€ `http://localhost:8000`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìˆœì„œ

### STEP 1: ì¸ì¦ (Auth)

1. **íšŒì›ê°€ì…** ìš”ì²­ ì‹¤í–‰
2. **ë¡œê·¸ì¸** ìš”ì²­ ì‹¤í–‰
   - JWT í† í°ì´ ìë™ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ `token`ì— ì €ì¥ë¨
3. **ë‚´ í”„ë¡œí•„ ì¡°íšŒ**ë¡œ ì¸ì¦ í™•ì¸

### STEP 2: ìºì‹œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

**"Cache Tests - Public Endpoints"** í´ë”:

1. **ë©”ë‰´ ëª©ë¡ - 1st request**
   - Consoleì—ì„œ ì‘ë‹µ ì‹œê°„ í™•ì¸ (ì˜ˆ: 50ms)
2. **ë©”ë‰´ ëª©ë¡ - 2nd request (cached)**
   - Consoleì—ì„œ ì‘ë‹µ ì‹œê°„ í™•ì¸ (ì˜ˆ: 5ms)
   - ì„±ëŠ¥ ê°œì„ ìœ¨ ìë™ ê³„ì‚°

> **ê²°ê³¼ í™•ì¸**: Postman í•˜ë‹¨ì˜ **Console** (View â†’ Show Postman Console)ì—ì„œ ë¡œê·¸ í™•ì¸

### STEP 3: ìºì‹œ ë¬´íš¨í™” í…ŒìŠ¤íŠ¸

**"Cache Invalidation Test"** í´ë” ìˆœì„œëŒ€ë¡œ ì‹¤í–‰:

1. **STEP 1**: ìƒí’ˆ ìƒì„¸ ì¡°íšŒ
   - Consoleì— í˜„ì¬ í‰ì /ê°œìˆ˜ í‘œì‹œ
2. **STEP 2**: í›„ê¸° ì‘ì„±
   - í‰ì /ê°œìˆ˜ ìºì‹œ ë¬´íš¨í™” íŠ¸ë¦¬ê±°
3. **STEP 3**: ìƒí’ˆ ìƒì„¸ ì¬ì¡°íšŒ
   - Consoleì—ì„œ ë³€ê²½ ì „/í›„ ë¹„êµ
   - Test íƒ­ì—ì„œ ìë™ ê²€ì¦ ê²°ê³¼ í™•ì¸

---

## ğŸ“Š Console ì¶œë ¥ ì˜ˆì‹œ

```
==================================================
ğŸ“Š STEP 1: í›„ê¸° ì‘ì„± ì „
==================================================
â­ í‰ì : 4.2
ğŸ“ í›„ê¸° ê°œìˆ˜: 5
==================================================

==================================================
âœï¸ STEP 2: í›„ê¸° ì‘ì„± ì™„ë£Œ
==================================================
ğŸ”„ í‰ì /ê°œìˆ˜ ìºì‹œê°€ ë¬´íš¨í™”ë¨
==================================================

==================================================
ğŸ“Š STEP 3: í›„ê¸° ì‘ì„± í›„
==================================================
â­ í‰ì : 4.2 â†’ 4.3
ğŸ“ í›„ê¸° ê°œìˆ˜: 5 â†’ 6
==================================================

âœ… ìºì‹œ ë¬´íš¨í™” ì„±ê³µ! ìƒˆë¡œìš´ ê°’ì´ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤.
```

---

## ğŸ”‘ ì£¼ìš” ê¸°ëŠ¥

### ìë™í™”ëœ í…ŒìŠ¤íŠ¸

- **JWT í† í° ìë™ ì €ì¥**: ë¡œê·¸ì¸ í›„ ìë™ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ì— ì €ì¥
- **ì‘ë‹µ ì‹œê°„ ì¸¡ì •**: ìºì‹œ ì „/í›„ ì„±ëŠ¥ ë¹„êµ
- **ìºì‹œ ë¬´íš¨í™” ê²€ì¦**: í‰ì /ê°œìˆ˜ ë³€ê²½ ìë™ í™•ì¸

### ìºì‹œ TTL

| ì—”ë“œí¬ì¸íŠ¸ | ìºì‹œ ì‹œê°„ |
|---|---|
| ë©”ë‰´ | 24ì‹œê°„ |
| ì¹´í…Œê³ ë¦¬/ìƒ‰ìƒ/ì‚¬ì´ì¦ˆ | 12ì‹œê°„ |
| ìƒí’ˆ ëª©ë¡ | 15ë¶„ |
| ìƒí’ˆ ìƒì„¸ | 10ë¶„ |
| ì¬ê³  | 1ë¶„ |

---

## ğŸ› ï¸ ìƒ˜í”Œ ë°ì´í„° ìƒì„±

**"Admin - Create Sample Data"** í´ë”:

> âš ï¸ ê´€ë¦¬ì ê¶Œí•œ(is_staff=True) í•„ìš”

Django Adminì—ì„œ ì‚¬ìš©ìë¥¼ ê´€ë¦¬ìë¡œ ì„¤ì •:

```bash
uv run python manage.py createsuperuser
```

ë˜ëŠ” Django Shellì—ì„œ:

```python
uv run python manage.py shell

from apps.users.models import User
user = User.objects.get(email='test@example.com')
user.is_staff = True
user.save()
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ìºì‹œê°€ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²½ìš°

1. **ì„œë²„ ì¬ì‹œì‘**: LocMemCacheëŠ” ë©”ëª¨ë¦¬ ê¸°ë°˜
2. **ìºì‹œ ì´ˆê¸°í™”**:
   ```bash
   uv run python manage.py shell
   ```
   ```python
   from django.core.cache import cache
   cache.clear()
   ```

### 401 Unauthorized

- ë¡œê·¸ì¸ ìš”ì²­ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ì—¬ í† í° ê°±ì‹ 
- Environmentì—ì„œ `token` ë³€ìˆ˜ í™•ì¸

---

## ğŸ“š ë” ì•Œì•„ë³´ê¸°

ìºì‹œ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì€ ë‹¤ìŒ íŒŒì¼ ì°¸ê³ :

- [config/settings.py](config/settings.py#L169-L188) - ìºì‹œ ì„¤ì •
- [apps/core/cache_utils.py](apps/core/cache_utils.py) - ìºì‹œ ìœ í‹¸ë¦¬í‹°
- [apps/products/signals.py](apps/products/signals.py) - ìºì‹œ ë¬´íš¨í™” ì‹œê·¸ë„
